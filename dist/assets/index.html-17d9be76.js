import{j as e,r as a,u as f,c as C,R as v}from"./useChromeLocalStorage-1ca9d656.js";(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))h(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&h(c)}).observe(document,{childList:!0,subtree:!0});function i(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function h(t){if(t.ep)return;t.ep=!0;const s=i(t);fetch(t.href,s)}})();const m=({value:u})=>u?e.jsx(e.Fragment,{children:"↑"}):e.jsx(e.Fragment,{children:"↓"}),w=()=>{const[u,d]=a.useState([]),[i,h]=a.useState("createdAt"),[t,s]=a.useState(!1),c=a.useCallback(r=>{const n=Object.entries(r).map(([o,{href:l,createdAt:x}])=>({offerId:Number.parseInt(o),href:l,createdAt:x}));n.sort((o,l)=>o[i]<l[i]?t?-1:1:o[i]>l[i]?t?1:-1:0),d(n)},[d,i,t]),j=a.useCallback(async r=>{const{value:n}=await f("hide-offers",{});i!==r?(h(r),s(!0)):s(!t),c(n)},[u,d,i,h,t,s]),p=a.useCallback(async r=>{const{value:n,set:o}=await f("hide-offers",{});delete n[r],await o(n),c(n)},[c]),y=a.useCallback(async()=>{const{remove:r}=await f("hide-offers",{});await r(),c({})},[c]),g=a.useCallback(async()=>{const{value:r}=await f("hide-offers",{}),n=`data:text/json;chatset=utf-8,${encodeURIComponent(JSON.stringify(r))}`,o=document.createElement("a");o.href=n,o.download="data.json",o.click()},[]),b=a.useCallback(({target:r})=>{if(!r.files)return;const n=new FileReader;n.readAsText(r.files[0],"UTF-8"),n.onload=async({target:o})=>{if(!o.result)return;const l=JSON.parse(o.result),{set:x}=await f("hide-offers",{});await x(l),c(l)}},[c]);return a.useEffect(()=>{f("hide-offers",{}).then(({value:r})=>{c(r)})},[c]),e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Key"}),e.jsxs("th",{onClick:()=>j("offerId"),children:["Id",i==="offerId"&&e.jsx(m,{value:t})]}),e.jsxs("th",{onClick:()=>j("createdAt"),children:["Created",i==="createdAt"&&e.jsx(m,{value:t})]}),e.jsx("th",{children:"Action"})]})}),e.jsxs("tbody",{children:[u.map(({offerId:r,href:n,createdAt:o},l)=>e.jsxs("tr",{children:[e.jsx("td",{children:l+1}),e.jsx("td",{children:e.jsx("a",{href:n,children:r})}),e.jsx("td",{style:{whiteSpace:"nowrap"},children:o}),e.jsx("td",{children:e.jsx("button",{onClick:()=>p(r),children:"remove"})})]})),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("button",{onClick:g,children:"export"})}),e.jsx("td",{colSpan:2,children:e.jsx("input",{type:"file",onChange:b})}),e.jsx("td",{children:e.jsx("button",{onClick:y,children:"remove all"})})]})]})]})};C(document.getElementById("root")).render(e.jsx(v.StrictMode,{children:e.jsx(w,{})}));
